<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="Fe7L!^O0])zdT,*,*T{$">receivedData</variable><variable id="/jujf%`T[[#zk?zR+Ka4">waterDir</variable><variable id="gVVHj?OXq`RjW*TLCTBu">distance</variable><variable id="M`U.=~h?oQ3bYlPGsHvK">avoidDir</variable></variables><block type="function_definition" id=",CV8HYcj:jQ8P6-C+k@}" collapsed="true" x="819" y="-217"><mutation name="controlMotors" functionid="qKJ=A,#*MoQdx2v[@v=L"><arg name="dir" id="8e2mpul7ogl5au4d8toao" type="number"></arg></mutation><field name="function_name">controlMotors</field><comment pinned="false" h="80" w="160">Function to control motors based on direction</comment><value name="8e2mpul7ogl5au4d8toao"><block type="argument_reporter_number" id=",bD|ZeA9rgs]9Hcx-i*|"><mutation duplicateondrag="true"></mutation><field name="VALUE">dir</field></block></value><statement name="STACK"><block type="controls_if" id="B`f5`h|ofpUiM|2e/$t)"><mutation elseif="3" else="1"></mutation><value name="IF0"><shadow type="logic_boolean" id="V]r0X,M#rRTR|`Pg]|1$"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="ng:ZJVn{2TLQ3r`kJFg}"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id=":vL}kK9]-LdpsSCDqOW{"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="_p#Px;.CzoEO$Q.]f{Z_"><field name="VALUE">dir</field></block></value><value name="B"><shadow type="math_number" id="An4L+E:Rs8x%XEhob5Iz"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="basic_show_arrow" id="JYuA51M]t]En?]Kh;W8g"><comment pinned="false" h="80" w="160">Move forward</comment><value name="i"><shadow type="device_arrow" id="Rqc5j21~7yE)/-W%X)z:"><field name="arrow">ArrowNames.North</field></shadow></value><next><block type="robotbit_motor_dual" id="XF*CwxPh8S%W=ys_DC^="><field name="motor1">robotbit.Motors.M1A</field><field name="motor2">robotbit.Motors.M1B</field><value name="speed1"><shadow type="math_number_minmax" id="fLB~TY?rL:Un-AdPBSpg"><mutation min="-255" max="255" precision="0"></mutation><field name="SLIDER">150</field></shadow></value><value name="speed2"><shadow type="math_number_minmax" id="0vw#GnNR]CF.^I`Dk#ds"><mutation min="-255" max="255" precision="0"></mutation><field name="SLIDER">150</field></shadow></value></block></next></block></statement><value name="IF1"><shadow type="logic_boolean" id="yDKJMgU_qbx(8V@a|0kw"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="7WTrJUYM%|33Dz]`Oqhf"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="{riXa1hJasS$Jma8f=6?"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="vPj`~7,/A6WxvT]Xj.(s"><field name="VALUE">dir</field></block></value><value name="B"><shadow type="math_number" id="3zRG^0V}_RpQM[^4SeYp"><field name="NUM">1</field></shadow></value></block></value><statement name="DO1"><block type="basic_show_arrow" id=":o$gC7|fnFF9dPyb_29C"><comment pinned="false" h="80" w="160">Turn left</comment><value name="i"><shadow type="device_arrow" id="5*i]$?Y:kq:n6VrKy:C("><field name="arrow">ArrowNames.West</field></shadow></value><next><block type="robotbit_motor_dual" id="a1VDlK$JG?gXGWBL=K,g"><field name="motor1">robotbit.Motors.M1A</field><field name="motor2">robotbit.Motors.M1B</field><value name="speed1"><shadow type="math_number_minmax" id="H@N{5_VrM88mohpF2]{g"><mutation min="-255" max="255" precision="0"></mutation><field name="SLIDER">0</field></shadow></value><value name="speed2"><shadow type="math_number_minmax" id="`q##:+;9KI/R~k$+Yk*_"><mutation min="-255" max="255" precision="0"></mutation><field name="SLIDER">150</field></shadow></value></block></next></block></statement><value name="IF2"><shadow type="logic_boolean" id="L/K,hXy+Rm)w)+rn|QUL"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="wXDO7)LUy-:9PE=JLzyO"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="k}|0E+;z~Mu#SMVJbgE!"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="kIa]ih#d3E2ceRiP|=BJ"><field name="VALUE">dir</field></block></value><value name="B"><shadow type="math_number" id="]AO0tx%Bme(uJ_4jEIg?"><field name="NUM">2</field></shadow></value></block></value><statement name="DO2"><block type="basic_show_arrow" id="v31Nt5$`JW}A~DnVQ4I?"><comment pinned="false" h="80" w="160">Turn right</comment><value name="i"><shadow type="device_arrow" id="bRJql.82_-XBy`)bNwC("><field name="arrow">ArrowNames.East</field></shadow></value><next><block type="robotbit_motor_dual" id="@I0rp}!%}dWIK;nKpGtc"><field name="motor1">robotbit.Motors.M1A</field><field name="motor2">robotbit.Motors.M1B</field><value name="speed1"><shadow type="math_number_minmax" id="@mZ$bA{Czmb1:?4Uw5=l"><mutation min="-255" max="255" precision="0"></mutation><field name="SLIDER">150</field></shadow></value><value name="speed2"><shadow type="math_number_minmax" id="g:!O^Bk!F+jEV.+Pp%o."><mutation min="-255" max="255" precision="0"></mutation><field name="SLIDER">0</field></shadow></value></block></next></block></statement><value name="IF3"><shadow type="logic_boolean" id="EZ+/+(e,}dsQvJGRx9~0"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="eW4wi_xDLEh*)nK[kXhO"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="(~1-:%;;c50^BwJb}%pC"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="D.^7K~yj#1={Z/0xqC(f"><field name="VALUE">dir</field></block></value><value name="B"><shadow type="math_number" id="IB[Mw@kCo-4ffNP}=T++"><field name="NUM">3</field></shadow></value></block></value><statement name="DO3"><block type="basic_show_arrow" id="q^v}xqj_RK@?qNXfI.!]"><comment pinned="false" h="80" w="160">Move backward</comment><value name="i"><shadow type="device_arrow" id="@x:6=n:GdTlo9yewEBpV"><field name="arrow">ArrowNames.South</field></shadow></value><next><block type="robotbit_motor_dual" id="NP)kq+?T:K?gtblo?g-r"><field name="motor1">robotbit.Motors.M1A</field><field name="motor2">robotbit.Motors.M1B</field><value name="speed1"><shadow type="math_number_minmax" id="Lz`rgI0XS*?tE%O8hbhY"><mutation min="-255" max="255" precision="0"></mutation><field name="SLIDER">150</field></shadow></value><value name="speed2"><shadow type="math_number_minmax" id="]V/7Wn7;vWP7K@Z$`GRm"><mutation min="-255" max="255" precision="0"></mutation><field name="SLIDER">150</field></shadow></value></block></next></block></statement><statement name="ELSE"><block type="device_clear_display" id="k;61JpmeJCa1vx(Ylnb$"><comment pinned="false" h="80" w="160">Stop motors</comment><next><block type="robotbit_motor_dual" id="sVGDx,8L(Kq7ZI8j95{S"><field name="motor1">robotbit.Motors.M1A</field><field name="motor2">robotbit.Motors.M1B</field><value name="speed1"><shadow type="math_number_minmax" id="sazSq*~zw01.x}WPO[bL"><mutation min="-255" max="255" precision="0"></mutation><field name="SLIDER">0</field></shadow></value><value name="speed2"><shadow type="math_number_minmax" id="B5p;BY!fUB@j_b_o%ltr"><mutation min="-255" max="255" precision="0"></mutation><field name="SLIDER">0</field></shadow></value></block></next></block></statement></block></statement></block><block type="device_forever" id="#(743!8DX.aZAg;HVbD%" x="241" y="-110"><comment pinned="false" h="80" w="160">Main loop</comment><statement name="HANDLER"><block type="variables_set" id="Q`59Uq=J-+Z8]*Px5.@`"><field name="VAR" id="gVVHj?OXq`RjW*TLCTBu">distance</field><value name="VALUE"><shadow type="math_number" id="kkaHV)r2Eh~m(xV*3_jM"><field name="NUM">0</field></shadow><block type="sonar_ping" id="6t)GdIiYH0kV}aJWaKRs"><field name="trig">DigitalPin.P0</field><field name="echo">DigitalPin.P1</field><field name="unit">PingUnit.MicroSeconds</field></block></value><next><block type="function_call" id="FPiCIyj:u~DGU3GQ:M[Q"><mutation name="receiveData" functionid="DJ/!G$nKEtYj-Z$8t~C."></mutation><comment pinned="false" h="80" w="160">Receive movement direction from Raspberry Pi</comment><next><block type="device_pause" id="K))x,W:DYYKd=x,rpdI?"><value name="pause"><shadow type="timePicker" id="u|x1@O-c~Cp1Uo0A^t1h"><field name="ms">200</field></shadow></value></block></next></block></next></block></statement></block><block type="pxt-on-start" id="vbQ]@pQ.]dUju_GM#z0K" x="0" y="0"><statement name="HANDLER"><block type="serial_redirect_to_usb" id=".~@S;8uve6K$UT#C=^pQ"><comment pinned="false" h="80" w="160">Set up serial communication to USB or pins</comment><next><block type="variables_set" id="*Eb:?kv~AUP]Qf~BAW)a"><field name="VAR" id="/jujf%`T[[#zk?zR+Ka4">waterDir</field><value name="VALUE"><shadow type="math_number" id=")01$cy-O3N41Ndl-B{=+"><field name="NUM">0</field></shadow></value><next><block type="variables_set" id="+*g7k,Fsx{8Rt{EU;8?t"><field name="VAR" id="M`U.=~h?oQ3bYlPGsHvK">avoidDir</field><value name="VALUE"><shadow type="math_number" id="=bleC.F+0658X$MON9[R"><field name="NUM">0</field></shadow></value><next><block type="basic_show_icon" id="Zs[]kT#TohCLWQ-XkGY*"><field name="i">IconNames.Yes</field></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="hGFMTJE}0+1z_qfVuG?T" x="-72" y="239"><mutation name="avoidObstacle" functionid="JpsdorOMLRSj#zx]#aMU"></mutation><field name="function_name">avoidObstacle</field><statement name="STACK"><block type="controls_if" id="9bmSVQKkjKyNyIw_8ks@"><value name="IF0"><shadow type="logic_boolean" id="iWguz}LU_C2#wU(`MpKm"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="+uV)q08zSY-IH_M_;(wX"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="pb})vX0*lqu)3C8j5i0-"><field name="NUM">0</field></shadow><block type="variables_get" id="otx]!?s*RVj8M`uTB@:-"><field name="VAR" id="gVVHj?OXq`RjW*TLCTBu">distance</field></block></value><value name="B"><shadow type="math_number" id="jo@@Wgqaz:$y;/{-y#sH"><field name="NUM">500</field></shadow></value></block></value><statement name="DO0"><block type="variables_set" id="ffD;7DyisI/-uqKR#)mr"><field name="VAR" id="M`U.=~h?oQ3bYlPGsHvK">avoidDir</field><value name="VALUE"><shadow type="math_number" id="PlmxCy8O!Riey82f)NQi"><field name="NUM">0</field></shadow></value></block></statement></block></statement></block><block type="function_definition" id="SBE$UiTd/#jdkiHH*oHG" collapsed="true" x="363" y="239"><mutation name="receiveData" functionid="DJ/!G$nKEtYj-Z$8t~C."></mutation><field name="function_name">receiveData</field><comment pinned="false" h="80" w="160">Function to receive direction from Raspberry Pi and control motors</comment><statement name="STACK"><block type="variables_set" id="]9+7ODb8Cpe,MSU-2eB9"><field name="VAR" id="Fe7L!^O0])zdT,*,*T{$">receivedData</field><value name="VALUE"><shadow type="math_number" id="+U`K9vHs,@W?Sj2cw#(`"><field name="NUM">0</field></shadow><block type="serial_read_line" id="`u|JB44Z[6#!ib:g[$Of"></block></value><next><block type="controls_if" id="#/1}Mz,2J8{Ry,ssK?I9"><comment pinned="false" h="80" w="160">Check if data starts with "direction:"</comment><value name="IF0"><shadow type="logic_boolean" id="#j4CcXsKL2TXN`vcJ{mo"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="O]DmCj=/VXsIU/gC:ho?"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="Qfhp)F.:]/5Ai8%a-fcz"><field name="NUM">0</field></shadow><block type="string_indexof" id="JGli5$poZF@u7aD48UkL"><value name="this"><shadow type="text" id="gkcnVU(p`SGK;Vl.5e=9"><field name="TEXT"></field></shadow><block type="variables_get" id=",tmq;,R5K?`C`t3VG?+v"><field name="VAR" id="Fe7L!^O0])zdT,*,*T{$">receivedData</field></block></value><value name="searchValue"><shadow type="text" id="uL{SS.JguA#ve$OP|40p"><field name="TEXT">direction:</field></shadow></value></block></value><value name="B"><shadow type="math_number" id="dtjy#Y0`ow@e4xu[b[r."><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="variables_set" id="~OEF3a=%^^K3[v*3Spiy"><field name="VAR" id="/jujf%`T[[#zk?zR+Ka4">waterDir</field><comment pinned="false" h="80" w="160">Extract the direction value</comment><value name="VALUE"><shadow type="math_number" id="f9`u#M*%me#)O(7J-K#O"><field name="NUM">0</field></shadow><block type="string_parsefloat" id="YRM}@Xj~eWag}H}78Ndu"><value name="text"><block type="string_substr" id="U%P{r[X9y4[oF-+WG3sI"><value name="this"><shadow type="text" id="jhqn/s+C%|e:mUfy%MZd"><field name="TEXT"></field></shadow><block type="variables_get" id="gBOR(9^}z)v}LAulvIio"><field name="VAR" id="Fe7L!^O0])zdT,*,*T{$">receivedData</field></block></value><value name="start"><shadow type="math_number" id="^ZeF9*d,)oh|Nq/)vt_d"><field name="NUM">10</field></shadow></value><value name="length"><shadow type="math_number" id="$Qpw]ISEC~hZ}*JC:Vc}"><field name="NUM">5</field></shadow></value></block></value></block></value></block></statement></block></next></block></statement></block></xml>